<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio a Texto - Transcriptor Automático</title>
    <meta name="description"
        content="Convierte archivos de audio a texto de forma local y gratuita con tecnología Whisper AI">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                            fill="url(#gradient1)" />
                        <path d="M12 6V14L16 10" stroke="url(#gradient2)" stroke-width="2" stroke-linecap="round" />
                        <defs>
                            <linearGradient id="gradient1" x1="2" y1="2" x2="22" y2="22">
                                <stop offset="0%" stop-color="#667eea" />
                                <stop offset="100%" stop-color="#764ba2" />
                            </linearGradient>
                            <linearGradient id="gradient2" x1="12" y1="6" x2="16" y2="14">
                                <stop offset="0%" stop-color="#f093fb" />
                                <stop offset="100%" stop-color="#f5576c" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <h1>Audio a Texto</h1>
                </div>
                <p class="subtitle">Transcripción automática con Whisper AI</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Language Selector -->
            <div class="language-selector">
                <label for="language">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path
                            d="M12.87 15.07L10.33 12.56L10.36 12.53C12.1 10.59 13.34 8.36 14.07 6H17V4H10V2H8V4H1V6H12.17C11.5 7.92 10.44 9.75 9 11.35C8.07 10.32 7.3 9.19 6.69 8H4.69C5.42 9.63 6.42 11.17 7.67 12.56L2.58 17.58L4 19L9 14L12.11 17.11L12.87 15.07ZM18.5 10H16.5L12 22H14L15.12 19H19.87L21 22H23L18.5 10ZM15.88 17L17.5 12.67L19.12 17H15.88Z"
                            fill="currentColor" />
                    </svg>
                    Idioma
                </label>
                <select id="language">
                    <option value="es" selected>Español</option>
                    <option value="en">English</option>
                    <option value="fr">Français</option>
                    <option value="de">Deutsch</option>
                    <option value="it">Italiano</option>
                    <option value="pt">Português</option>
                    <option value="auto">Detección Automática</option>
                </select>
            </div>

            <!-- Model Selector -->
            <div class="model-selector">
                <label for="model">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="currentColor" opacity="0.5" />
                        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    Modelo de Precisión
                </label>
                <select id="model">
                    <option value="small" selected>Small (Recomendado - Rápido y preciso)</option>
                    <option value="medium">Medium (Máxima precisión - Más lento)</option>
                </select>
            </div>

            <!-- Timestamps Option -->
            <div class="timestamps-option">
                <label for="timestamps">
                    <input type="checkbox" id="timestamps" checked>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                        <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    <span>Incluir marcas de tiempo (HH:MM:SS)</span>
                </label>
            </div>

            <!-- Diarization Option -->
            <div class="diarization-option">
                <div class="diarization-controls">
                    <label class="diarization-label" for="diarization">
                        <input type="checkbox" id="diarization">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        <span>Identificar Hablantes (Diarización)</span>
                    </label>
                    <button id="settingsBtn" class="settings-btn" title="Configurar Token">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                    </button>
                </div>

                <div id="speakersInputContainer" class="speakers-input-container" style="display: none;">
                    <label for="numSpeakers">Nº de Hablantes:</label>
                    <input type="number" id="numSpeakers" min="1" max="10" placeholder="Auto"
                        title="Opcional: Ayuda a la IA a ser más precisa">
                </div>
            </div>

            <!-- Time Estimate (hidden by default) -->
            <div class="time-estimate" id="timeEstimate" style="display: none;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                    <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <span id="timeEstimateText">Estimando tiempo...</span>
            </div>

            <!-- Upload Area -->
            <div class="upload-section">
                <div class="upload-zone" id="uploadZone">
                    <svg class="upload-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M9 16H15M12 13V19M19 9.77818V16.2C19 17.8802 19 18.7202 18.673 19.362C18.3854 19.9265 17.9265 20.3854 17.362 20.673C16.7202 21 15.8802 21 14.2 21H9.8C8.11984 21 7.27976 21 6.63803 20.673C6.07354 20.3854 5.6146 19.9265 5.32698 19.362C5 18.7202 5 17.8802 5 16.2V9.77818C5 8.43558 5 7.76427 5.21799 7.17506C5.40973 6.65258 5.72713 6.18471 6.14031 5.81084C6.61346 5.38375 7.24103 5.12732 8.49616 4.61445L10.8962 3.57771C11.2756 3.42062 11.4653 3.34208 11.6603 3.30598C11.8323 3.27366 12.0077 3.27366 12.1797 3.30598C12.3747 3.34208 12.5644 3.42062 12.9438 3.57771L15.3438 4.61445C16.599 5.12732 17.2265 5.38375 17.6997 5.81084C18.1129 6.18471 18.4303 6.65258 18.622 7.17506C18.84 7.76427 18.84 8.43558 18.84 9.77818V9.77818"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <h3>Arrastra archivos de audio aquí</h3>
                    <p>o haz clic para seleccionar</p>
                    <span class="file-types">MP3, WAV, M4A, FLAC, OGG, WMA, MPEG</span>
                    <input type="file" id="fileInput" multiple
                        accept="audio/*,audio/mpeg,.mp3,.wav,.m4a,.flac,.ogg,.wma,.aac,.mpeg,.mpg,.mp2" hidden>
                </div>
            </div>

            <!-- Files Queue -->
            <div class="files-queue" id="filesQueue" style="display: none;">
                <h2>Archivos en proceso</h2>
                <div id="filesList"></div>
            </div>

            <!-- Results -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <h2>Transcripciones completadas</h2>
                <div id="resultsList"></div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Powered by <strong>OpenAI Whisper</strong> • 100% Local • Gratuito</p>
        </footer>
    </div>

    <!-- Config Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>⚙️ Configuración</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="token-input-group">
                    <label for="hfToken">Hugging Face Token (para Diarización)</label>
                    <input type="text" id="hfToken" placeholder="hf_..." autocomplete="off">
                    <p style="font-size: 0.8rem; color: #a0a0c0; margin-top: 5px;">
                        Necesario para identificar hablantes. <a href="https://huggingface.co/settings/tokens"
                            target="_blank" style="color: #667eea;">Obtener Token</a>
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" id="cancelConfig">Cancelar</button>
                <button class="btn-save" id="saveConfig">Guardar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>